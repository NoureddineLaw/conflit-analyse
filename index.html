<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <title>โ๏ธ ุงููุณุงุนุฏ ุงููุงูููู - ุชูุงุฒุน ุงูููุงููู</title>
  <style>
    body {font-family:"Segoe UI",Tahoma,sans-serif;background:#f4f6f8;padding:40px;line-height:1.7;}
    h1{color:#0b3b66;}
    textarea{width:100%;height:140px;padding:10px;font-size:15px;border-radius:8px;border:1px solid #ccc;}
    button{margin-top:10px;padding:10px 20px;background:#0b3b66;color:#fff;border:none;border-radius:8px;cursor:pointer;}
    button:hover{background:#124b8a;}
    .result{background:#fff;padding:15px;margin-top:20px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
    .loading{color:#999;}
    footer{margin-top:40px;font-size:13px;color:#777;text-align:center;}
  </style>
</head>
<body>
  <h1>โ๏ธ ุงููุณุงุนุฏ ุงููุงูููู ูู ุชูุงุฒุน ุงูููุงููู</h1>
  <p>ุฃุฏุฎู ููุงุฆุน ุงููุถูุฉ ุงููุงููููุฉ:</p>
  <textarea id="facts" placeholder="ุงูุชุจ ููุง ุงููุงูุนุฉ ุงููุงููููุฉ..."></textarea><br>
  <button onclick="analyze()">ุชุญููู ูุงูููู ูุฌุงูู</button>
  <div class="result" id="output"></div>

  <footer>ุฅุตุฏุงุฑ ูุฌุงูู ุชุฌุฑูุจู โ ุงููุงููู ุงูุฏููู ุงูุฎุงุต (ุชูุงุฒุน ุงูููุงููู)</footer>

<script>
// ๐งฉ ุฎุฑูุทุฉ ุงููููุงุช ุงูููุชุงุญูุฉ ูุงูููุงุฏ ุงููุงููููุฉ
const keywordMap = {
  "ุฒูุงุฌ":["12"],"ุทูุงู":["14"],"ูููุฉ":["16"],
  "ูุตูุฉ":["17"],"ููุฑุงุซ":["18"],"ุนูุงุฑ":["22"],
  "ุนูุฏ":["20"],"ุชูุตูุฑ":["21"],"ุฅุญุงูุฉ":["23 ููุฑุฑ 1"],"ูุธุงู":["24"]
};

// ๐น ุงุณุชุฎุฑุงุฌ ุงูููุงุฏ ุงููุงููููุฉ ูู ุงููุงูุนุฉ
function extractArticles(text){
  let found = new Set();
  for(let key in keywordMap){
    if(text.includes(key)){
      keywordMap[key].forEach(a=>found.add(a));
    }
  }
  return Array.from(found);
}

// ๐น ุงูุชุญููู ุงููุงูููู ุนุจุฑ ูููุฐุฌ ููุชูุญ ุนูู Hugging Face Space
async function analyze(){
  const output=document.getElementById("output");
  output.innerHTML='<p class="loading">โณ ุฌุงุฑู ุงูุชุญููู... ูุฑุฌู ุงูุงูุชุธุงุฑ</p>';
  const facts=document.getElementById("facts").value.trim();
  if(!facts){output.innerHTML="<p>โ๏ธ ุงูุฑุฌุงุก ูุชุงุจุฉ ุงููุงูุนุฉ ุงููุงููููุฉ ุฃููุงู.</p>";return;}

  const articles=extractArticles(facts);
  const articleList=articles.length?articles.join(", "):"ูุง ุชูุฌุฏ ููุงุฏ ูุญุฏุฏุฉ";

  const prompt=`
ุฃูุช ุฎุจูุฑ ูุงูููู ุฌุฒุงุฆุฑู ูุฎุชุต ูู ุชูุงุฒุน ุงูููุงููู ุงูุฏููู ุงูุฎุงุต.
ุงููุทููุจ: ุชุญููู ููุงุฆุน ุงููุถูุฉ ุงูุชุงููุฉ ุจุฃุณููุจ ูุงูููู ุฌุฒุงุฆุฑู ุงุณุชูุงุฏูุง ุฅูู ุงูููุงุฏ ูู 9 ุฅูู 24 ูู ุงููุงููู ุงููุฏูู ุงูุฌุฒุงุฆุฑู.
ุงูููุงุฆุน: ${facts}
ุงูููุงุฏ ุงููุฑุฌุญุฉ: ${articleList}

ูุฏูู ุงูุฌูุงุจ ุจุงูุนุฑุจูุฉ ูุชุจูุนูุง ุจุงูููุงุท:
1) ุงูุชูููู ุงููุงูููู ูููุณุฃูุฉ (ู9)
2) ุงูุนูุตุฑ ุงูุฃุฌูุจู
3) ุถุงุจุท ุงูุฅุณูุงุฏ ูุงููุงุฏุฉ ุงููุงููููุฉ
4) ุงููุงููู ุงููุงุฌุจ ุงูุชุทุจูู ูููุงุฐุง
5) ุงููุชูุฌุฉ ุงููุงููููุฉ ุงููุฎุชุตุฑุฉ.
`;

  try {
    // โ ุงูุงุชุตุงู ุจูุณุงุญุฉ Hugging Face ุงููุฌุงููุฉ
    const res = await fetch("https://hf.space/embed/mistralai/Mistral-7B-Instruct-v0.2/api/predict/",
    {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ data: [prompt] })
    });

    const data = await res.json();
    const reply = data?.data?.[0] || "โ๏ธ ูู ูุชููู ุงููููุฐุฌ ูู ุชูููุฏ ุฅุฌุงุจุฉ ุญุงููุงู.";
    output.innerHTML = `<h3>๐ ุงูุชุญููู ุงููุงูููู:</h3><p>${reply}</p>`;
  } catch (e) {
    output.innerHTML = "<p>โ๏ธ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุงุชุตุงู ุจุงููููุฐุฌ. ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช.</p>";
    console.error(e);
  }
}
</script>
</body>
</html>
